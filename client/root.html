<html>
    <head>
        <title>NEDB in Datatables</title>
        <link rel="stylesheet" type="text/css" href="DataTables/datatables.min.css"/>
        <script type="text/javascript" src="DataTables/datatables.min.js"></script>
        
        <script type="text/javascript">
            
            function getData(callback) {
                $.ajax({
                  url: "http://localhost:3000/api/dfind/root/query/%7B%7D",
                  success: callback
                });
            }
            
            // this example gets the columns in a semi-dynamic way
            $(document).ready(function() {
                getData(function( data ) {
                    var columns = [];
                    console.log(data.data[0]);
                    //data = JSON.parse(data);
                    columnNames = Object.keys(data.data[0]);
                    for (var i in columnNames) {
                        columns.push({data: columnNames[i], title: columnNames[i]});
                    }
                    var table = $('#example').DataTable({
                        data: data.data,
                        columns: columns,
                        dom: 'Bfrtip',
                        buttons: [
                            {
                                extend: 'selectedSingle',
                                text: 'Log selected data',
                                action: function ( e, dt, button, config ) {
                                    console.log( dt.row( { selected: true } ).data() );
                                }
                            },
                            {
                                extend: 'selectNone',
                                text: 'Deselect'
                            },
                            {   
                                text: 'Refresh',
                                action: function (e, dt, node, config ) {
                                    table.ajax.reload();
                                }
                            }
                        ],
                        select: {
                            style: "single",
                            items: "row",
                            blurable: true
                        }                   
                    });
                });
            });
        </script>
        <body>
        
            <table id="example" class="display" style="width:100%">
            </table>          
            
        </body>
    </head>
</html>